#include <stdio.h>

int main() {
    int N_PERIODS, cmdCode, i;
    float initialBalance, PENALTY_FEE, amount;
    float currentBalance;
    float totalPenalties = 0.0;

    if (scanf("%f %f %d", &initialBalance, &PENALTY_FEE, &N_PERIODS) != 3) {
        return 1;
    }
    currentBalance = initialBalance;
    printf("Starting Balance: %.2f\n", initialBalance);

    for (i = 1; i <= N_PERIODS; i++) {
        if (scanf("%d %f", &cmdCode, &amount) != 2) {
            break;
            }
        printf("--- Month %d ---\n", i);

        switch (cmdCode) {
            case 1:
                currentBalance += amount;
                printf("Deposit: %.2f\n", amount);
                break;

            case 2:
                if (amount <= currentBalance) {
                    currentBalance -= amount;
                    printf("Withdrawal: %.2f\n", amount);
                } else {
                    totalPenalties += PENALTY_FEE;
                    printf("WITHDRAWAL FAILED. Penalty %.2f applied.\n", PENALTY_FEE);
                }
                break;

            case 3:
                {
                    float apr;
                    if (currentBalance < 1000.00) {
                        apr = 1.0;
                    } else {
                        apr = 2.5;
                    }
                    float interest = currentBalance * (apr / 100.0 / 12.0);
                    currentBalance += interest;
                    printf("Interest: %.2f (Rate: %.2f%%)\n", interest, apr);
                }
                break;

            default:
                printf("Error: Invalid Command.\n");
                break;
        }
    }

    printf("Final Balance: %.2f\n", currentBalance);
    printf("Total Penalties: %.2f\n", totalPenalties);

    return 0;
}
-------------------------------------------------------
500.00 20.00 4 1 100.00 3 0.0 800.00 3 0.0
Output:

Starting Balance: 500.00
--- Month 1 ---
Deposit: 100.00
--- Month 2 ---
Interest: 0.50 (Rate: 1.00%)
--- Month 3 ---
Error: Invalid Command.
--- Month 4 ---
Interest: 0.50 (Rate: 1.00%)
Final Balance: 601.00
Total Penalties: 0.00
------------------------------------------------------
1000.00 50.00 3 3 0.0 1 500.00 3 0.0
Output:

Starting Balance: 1000.00
--- Month 1 ---
Interest: 2.08 (Rate: 2.50%)
--- Month 2 ---
Deposit: 500.00
--- Month 3 ---
Interest: 3.13 (Rate: 2.50%)
Final Balance: 1505.21
Total Penalties: 0.00
------------------------------------------------------
50.00 10.00 5 2 100.00 1 10.00 2 10.00 30.0 2 1.00
Output:

Starting Balance: 50.00
--- Month 1 ---
WITHDRAWAL FAILED. Penalty 10.00 applied.
--- Month 2 ---
Deposit: 10.00
--- Month 3 ---
Withdrawal: 10.00
--- Month 4 ---
Error: Invalid Command.
--- Month 5 ---
Withdrawal: 1.00
Final Balance: 49.00
Total Penalties: 10.00

------------------------------------------------------
10000.00 0.00 2 3 0.0 4 10.00
Output:

Starting Balance: 10000.00
--- Month 1 ---
Interest: 20.83 (Rate: 2.50%)
--- Month 2 ---
Error: Invalid Command.
Final Balance: 10020.83
Total Penalties: 0.00
